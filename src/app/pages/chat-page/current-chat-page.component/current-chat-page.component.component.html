@if (chatData$ | async; as chat) {
    <div class="chat-header">
        <img class="avatar2" [src]="chat.userFirst.avatarUrl | imgUrl" alt="avatar" />
        <span class="username">{{ chat.userFirst.username }}</span>
        <input
            [(ngModel)]="newMessage"
            (keydown.enter)="sendMessage()"
            placeholder="Введите сообщение..."
            type="text"
            class="message-field"
        />
        <button (click)="sendMessage()" class="send-btn" [disabled]="!newMessage.trim()">Отправить</button>
    </div>

    @for (message of chat.messages; track message.id) {
        <div [ngClass]="{ 'my-message': isMyMessage(message), 'partner-message': !isMyMessage(message) }" class="message">
            <div>
                <img
                    class="avatar"
                    [src]="(isMyMessage(message) ? chat.userSecond.avatarUrl : chat.userFirst.avatarUrl) | imgUrl"
                    alt="avatar"
                />
                {{ message.text }}
            </div>

            @if (isMyMessage(message)) {
                <div class="action-messages">
                    <button (click)="openModalRed()" class="action-message action-red">
                        <img src="/assets/imgs/red.png" class="action-img" alt="Редактировать"/>
                    </button>

                    <button (click)="onDelete(message.id)" class="action-message action-delete">
                        <img src="/assets/imgs/delete.png" class="action-img" alt="Удалить"/>
                    </button>
                </div>
            }

<!--            <div id="modal" class="modal">-->
<!--                <div class="modal-content">-->
<!--                    <h2>Редактирование текста</h2>-->
<!--                    <textarea id="text-edit-area"></textarea>-->
<!--                    <button id="save-btn">Сохранить</button>-->
<!--                    <button id="cancel-btn">Отмена</button>-->
<!--                </div>-->
<!--            </div>-->


        </div>
    }
}
